# Querying a MySQL Database with PHP & Connecting to a Database

## 1. Introduction
PHP provides multiple ways to connect and interact with a MySQL database. The two most commonly used extensions are:

- **MySQLi (MySQL Improved)** – Object-oriented + Procedural
- **PDO (PHP Data Objects)** – Supports multiple databases

These notes explain both **connection** and **querying** with **examples**, separately and in depth.

---

# 2. Connecting to MySQL Database (PHP MySQLi)

## 2.1 MySQLi Object-Oriented Connection
```php
<?php
$servername = "localhost";
$username = "root";
$password = "";
$dbname = "school";

$conn = new mysqli($servername, $username, $password, $dbname);

if ($conn->connect_error) {
    die("Connection failed: " . $conn->connect_error);
}

echo "Connected successfully";
?>
```

### Explanation:
- `new mysqli()` → creates connection
- `connect_error` → checks if connection failed

---

## 2.2 MySQLi Procedural Connection
```php
<?php
$conn = mysqli_connect("localhost", "root", "", "school");

if (!$conn) {
    die("Connection failed: " . mysqli_connect_error());
}

echo "Connected successfully";
?>
```

---

# 3. Connecting Using PDO

## 3.1 PDO Connection Example
```php
<?php
$dsn = "mysql:host=localhost;dbname=school";
$username = "root";
$password = "";

try {
    $conn = new PDO($dsn, $username, $password);
    $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    echo "Connected successfully";
} catch(PDOException $e) {
    echo "Connection failed: " . $e->getMessage();
}
?>
```

### Benefits of PDO:
- Secure (supports prepared statements)
- Works with MySQL, PostgreSQL, Oracle, etc.
- Better error handling

---

# 4. Querying a MySQL Database using PHP (MySQLi)

## 4.1 SELECT Query (MySQLi Object-Oriented)
```php
<?php
$sql = "SELECT * FROM students";
$result = $conn->query($sql);

if ($result->num_rows > 0) {
    while($row = $result->fetch_assoc()) {
        echo "ID: " . $row['id'] . " - Name: " . $row['name'] . "<br>";
    }
} else {
    echo "0 results";
}
?>
```

---

## 4.2 SELECT Query (MySQLi Procedural)
```php
<?php
$sql = "SELECT * FROM students";
$result = mysqli_query($conn, $sql);

if (mysqli_num_rows($result) > 0) {
    while($row = mysqli_fetch_assoc($result)) {
        echo $row['name'] . "<br>";
    }
}
?>
```

---

# 5. INSERT Query (MySQLi)
```php
<?php
$sql = "INSERT INTO students (name, age, course) VALUES ('Aman', 21, 'BCA')";

if ($conn->query($sql) === TRUE) {
    echo "Record inserted successfully";
} else {
    echo "Error: " . $conn->error;
}
?>
```

---

# 6. UPDATE Query (MySQLi)
```php
<?php
$sql = "UPDATE students SET course='MCA' WHERE id=1";

if ($conn->query($sql) === TRUE) {
    echo "Record updated successfully";
}
?>
```

---

# 7. DELETE Query (MySQLi)
```php
<?php
$sql = "DELETE FROM students WHERE id=3";

if ($conn->query($sql) === TRUE) {
    echo "Record deleted successfully";
}
?>
```

---

# 8. Querying Using PDO

## 8.1 SELECT Query (PDO)
```php
<?php
$stmt = $conn->prepare("SELECT * FROM students");
$stmt->execute();
$result = $stmt->fetchAll(PDO::FETCH_ASSOC);

foreach ($result as $row) {
    echo $row['name'] . "<br>";
}
?>
```

---

## 8.2 INSERT Query (PDO)
```php
<?php
$stmt = $conn->prepare("INSERT INTO students(name, age, course) VALUES (?,?,?)");
$stmt->execute(['Surya', 20, 'BCA']);
?>
```

---

# 9. Closing the Connection

### MySQLi
```php
$conn->close();
```

### PDO
```php
$conn = null;
```

---

# 10. Summary
- **MySQLi** → MySQL-specific, supports OOP + Procedural
- **PDO** → universal, secure, recommended
- PHP queries include: INSERT, SELECT, UPDATE, DELETE
- Always use **prepared statements** in real applications to prevent SQL injection

---

If you want, I can also add:
- Prepared Statements examples
- Login system using PHP + MySQL
- Database connection using functions
- Advanced queries (joins, constraints)

