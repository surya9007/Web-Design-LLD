# PHP MySQL: Parsing Query Results, Prepared Statements, and Error Checking

---

## **1. Parsing of Query Results**
**Meaning:** Parsing means **reading, extracting, and processing** the result returned from a SQL query.

When you run a query in PHP (using MySQLi or PDO), the result is stored in a result object. You need to **fetch** the rows to use them.

---

### ✔ **Example: Parsing Results Using MySQLi (Procedural)**
```php
$conn = mysqli_connect("localhost", "root", "", "testdb");

$sql = "SELECT id, name, email FROM users";
$result = mysqli_query($conn, $sql);

if (mysqli_num_rows($result) > 0) {
    while ($row = mysqli_fetch_assoc($result)) {
        echo "ID: " . $row['id'] . " Name: " . $row['name'] . " Email: " . $row['email'] . "<br>";
    }
} else {
    echo "No records found";
}
```

### ✔ **How it works:**
- `mysqli_query()` runs the SQL command.
- `mysqli_num_rows()` checks how many rows are returned.
- `mysqli_fetch_assoc()` reads **one row at a time** as an associative array.

---

### ✔ **Example: Parsing Results Using PDO**
```php
$conn = new PDO("mysql:host=localhost;dbname=testdb", "root", "");

$sql = "SELECT id, name FROM users";
$stmt = $conn->query($sql);

while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
    echo $row['id'] . " - " . $row['name'] . "<br>";
}
```

---

## **2. Database Querying Using Prepared Statements**
Prepared statements make queries **secure** and **faster** by preventing **SQL Injection**.

### ✔ **Steps of Prepared Statements:**
1. Prepare query → placeholder (?) or named (:name)
2. Bind values
3. Execute
4. Get result

---

## **Example 1: Prepared Statements (MySQLi Procedural)**
```php
$conn = mysqli_connect("localhost", "root", "", "testdb");

$sql = "SELECT * FROM users WHERE email = ?";
$stmt = mysqli_prepare($conn, $sql);

mysqli_stmt_bind_param($stmt, "s", $email);
$email = "test@gmail.com";

mysqli_stmt_execute($stmt);
$result = mysqli_stmt_get_result($stmt);

$row = mysqli_fetch_assoc($result);
print_r($row);
```

**Explanation:**
- `?` is a placeholder.
- `bind_param("s", $email)` → `s` means string.
- Prevents SQL injection.

---

## **Example 2: Prepared Statements (PDO)**
```php
$conn = new PDO("mysql:host=localhost;dbname=testdb", "root", "");

$sql = "SELECT * FROM users WHERE id = :id";
$stmt = $conn->prepare($sql);

$stmt->bindParam(':id', $id);
$id = 5;

$stmt->execute();
$result = $stmt->fetch(PDO::FETCH_ASSOC);

print_r($result);
```

---

## **3. Checking Data Errors**
Error checking helps find problems in:
- Connection
- Query execution
- Binding values
- Fetching records

---

## ✔ **Checking Errors in MySQLi**
```php
if (!$conn) {
    die("Connection failed: " . mysqli_connect_error());
}

$result = mysqli_query($conn, $sql);

if (!$result) {
    echo "Query Error: " . mysqli_error($conn);
}
```

---

## ✔ **Checking Errors in Prepared Statements (MySQLi)**
```php
if (!mysqli_stmt_execute($stmt)) {
    echo "Execution Failed: " . mysqli_stmt_error($stmt);
}
```

---

## ✔ **Checking Errors in PDO**
PDO supports **exceptions** (best method).

```php
try {
    $conn = new PDO($dsn, $user, $pass);
    $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

    $stmt = $conn->query("SELECT * FROM users");

} catch (PDOException $e) {
    echo "Error: " . $e->getMessage();
}
```

### ✔ Output example
```
Error: SQLSTATE[42000]: Syntax error or access violation
```

---

# ⭐ SUMMARY
| Topic | Meaning | Example |
|-------|---------|---------|
| Parsing Results | Fetching rows from query result | mysqli_fetch_assoc() |
| Prepared Statements | Secure queries with placeholders | bind_param(), bindParam() |
| Error Checking | Find connection/query issues | mysqli_error(), PDOException |

---

If you want, I can create:
✔ Downloadable `.md` file
✔ PDF
✔ Add CRUD operations
✔ Add PDO vs MySQLi comparison
✔ Add advanced topics (transactions, stored procedures)

